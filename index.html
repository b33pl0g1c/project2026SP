<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404 - Valentine Not Found</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Yomogi&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js"></script>
</head>

<body>
    <!-- Stage 0: Error Screen -->
    <div id="stage0" class="stage active">
        <div class="container">
            <p class="step-label">CRITICAL ERROR</p>
            <h1 class="error-code">404</h1>
            <p class="error-message">Valentine Not Found</p>
            <button class="btn primary" onclick="nextStage(1)">find me a valentine</button>
        </div>
    </div>

    <!-- Stage 1: Signature -->
    <div id="stage1" class="stage">
        <div class="container">
            <p class="step-label">STEP 1 OF 3</p>
            <h2 class="step-title">RECOVERY PROTOCOL</h2>
            <p class="instruction">To restore connection, please acknowledge:</p>
            <p class="quote">"Akash loves me more"</p>
            <p class="sign-instruction">Sign below to confirm ‚Üì</p>
            <div class="signature-box">
                <canvas id="signatureCanvas"></canvas>
            </div>
            <button id="submitBtn" class="btn primary hidden" onclick="showLoading()">Submit</button>
        </div>
    </div>

    <!-- Stage 1.5: Loading Screen -->
    <div id="stageLoading" class="stage">
        <div class="container loading-container">
            <div class="loading-spinner"></div>
            <p class="loading-text">Saving signature...</p>
            <p class="loading-subtext">Evidence secured for future reference.</p>
        </div>
    </div>

    <!-- Stage 2: Tic Tac Toe -->
    <div id="stage2" class="stage">
        <div class="container">
            <p class="step-label">STEP 2 OF 3</p>
            <h2 class="step-title">PLAY TO PROCEED</h2>
            <p id="turnText" class="turn-text">Your turn</p>
            <div class="ttt-board" id="tttBoard">
                <div class="ttt-line horizontal line1"></div>
                <div class="ttt-line horizontal line2"></div>
                <div class="ttt-line vertical line3"></div>
                <div class="ttt-line vertical line4"></div>
                <button class="ttt-cell" data-index="0"></button>
                <button class="ttt-cell" data-index="1"></button>
                <button class="ttt-cell" data-index="2"></button>
                <button class="ttt-cell" data-index="3"></button>
                <button class="ttt-cell" data-index="4"></button>
                <button class="ttt-cell" data-index="5"></button>
                <button class="ttt-cell" data-index="6"></button>
                <button class="ttt-cell" data-index="7"></button>
                <button class="ttt-cell" data-index="8"></button>
                <div class="win-line" id="winLine"></div>
            </div>
            <p id="gameResult" class="game-result hidden">Yay! You just won my heart!</p>
            <button id="continueBtn" class="btn primary hidden" onclick="nextStage(3)">Continue</button>
        </div>
    </div>

    <!-- Stage 3: Valentine Question -->
    <div id="stage3" class="stage">
        <div class="container">
            <p class="step-label">STEP 3 OF 3</p>
            <h2 class="step-title">FINAL VERIFICATION</h2>
            <p class="waiting-text">Akash is waiting...</p>
            <p class="valentine-question">Will you be my Valentine?</p>
            <div class="button-group">
                <button class="btn primary" onclick="nextStage(4)">Yes</button>
                <button class="btn secondary" id="noBtn">No</button>
            </div>
        </div>
    </div>

    <!-- Stage 4: Success -->
    <div id="stage4" class="stage">
        <div class="container success-container">
            <h2 class="success-title">CONNECTION ESTABLISHED!</h2>
            <p class="success-subtitle">Akash is now your Valentine</p>
            <div class="couple-container">
                <span class="love-text left">Love you</span>
                <img src="assets/images/couple-doodle.svg" alt="Couple Doodle" class="couple-image">
                <span class="love-text right">Long time &lt;3</span>
            </div>
            <button class="btn primary" onclick="showWallLoading()">Wall of Hearts üíï</button>
        </div>
        <div class="floating-hearts" id="floatingHearts"></div>
    </div>

    <!-- Stage 5 Loading: Wall of Hearts Loading -->
    <div id="stageWallLoading" class="stage">
        <div class="container loading-container">
            <div class="loading-spinner"></div>
            <p class="loading-text">Loading the Wall of Hearts...</p>
            <p class="loading-subtext">Compiling all the good memories with the beautiful lady</p>
        </div>
    </div>

    <!-- Stage 5: Wall of Hearts -->
    <div id="stage5" class="stage">
        <div class="container wall-container">
            <h2 class="wall-title">Wall of Hearts</h2>
            <p class="zoom-hint">Feel free to zoom in üîç</p>
            <div class="wall-image-container">
                <img src="assets/images/mr-confused.svg" alt="Mr Confused" class="wall-image">
            </div>
            <button class="btn outline" onclick="replay()">Replay ‚Üª</button>
        </div>
    </div>

    <script src="assets/js/script.js"></script>
</body>

</html>